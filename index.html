<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History of Tonga: Civil Wars & Political Transitions</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .timeline-container {
            position: relative;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .timeline {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
        }

        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background: linear-gradient(to bottom, #ff6b6b, #4ecdc4, #45b7d1);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 3px;
        }

        .timeline-item {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }

        .timeline-item.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            right: -17px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: 4px solid white;
            top: 15px;
            border-radius: 50%;
            z-index: 1;
            box-shadow: 0 0 20px rgba(255,107,107,0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 20px rgba(255,107,107,0.5); }
            50% { box-shadow: 0 0 30px rgba(255,107,107,0.8); }
            100% { box-shadow: 0 0 20px rgba(255,107,107,0.5); }
        }

        .left {
            left: 0;
        }

        .right {
            left: 50%;
        }

        .right::after {
            left: -16px;
        }

        .content {
            padding: 20px 30px;
            background: rgba(255,255,255,0.95);
            color: #333;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .timeline-item:hover .content {
            transform: scale(1);
        }

        .content h2 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.4em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .year {
            background: linear-gradient(45deg, #e74c3c, #f39c12);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .rulers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .ruler-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s ease;
        }

        .ruler-card.animate {
            transform: translateY(0);
            opacity: 1;
        }

        .ruler-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .island-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .island {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .island.tongatapu { border-color: #e74c3c; }
        .island.vavau { border-color: #3498db; }
        .island.haapai { border-color: #2ecc71; }

        .island:hover {
            transform: scale(1.05);
            background: rgba(255,255,255,0.2);
        }

        .family-tree {
            display: none;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .family-section {
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .family-section.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .family-title {
            font-size: 1.8em;
            color: #ffd700;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .dynasty {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid;
        }

        .dynasty.tui-tonga { border-left-color: #e74c3c; }
        .dynasty.tui-kanokupolu { border-left-color: #3498db; }
        .dynasty.tubou-family { border-left-color: #2ecc71; }
        .dynasty.finau-family { border-left-color: #f39c12; }

        .dynasty-header {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .person {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .person:hover {
            background: rgba(255,255,255,0.2);
            border-color: #ffd700;
            transform: scale(1.02);
        }

        .person-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
        }

        .person-title {
            color: #87ceeb;
            font-style: italic;
            margin-bottom: 8px;
        }

        .person-dates {
            color: #ffb6c1;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .person-info {
            color: #e0e0e0;
            font-size: 0.95em;
            line-height: 1.4;
        }

        .relationship-line {
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffd700, transparent);
            margin: 10px 0;
            position: relative;
        }

        .relationship-line::before {
            content: '‚Üì';
            position: absolute;
            right: 50%;
            top: -8px;
            color: #ffd700;
            font-size: 1.2em;
        }

        .connection {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            font-size: 0.9em;
            color: #b0b0b0;
        }

        .connection-line {
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, #666, transparent);
        }

        .married-to {
            background: rgba(255,182,193,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            border: 1px solid rgba(255,182,193,0.3);
        }

        .conflict-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e74c3c;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .alliance-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #2ecc71;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .family-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .timeline::after {
                left: 31px;
            }
            
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            
            .timeline-item::after {
                left: 15px;
            }
            
            .left::after, .right::after {
                left: 15px;
            }
            
            .right {
                left: 0%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öîÔ∏è History of Tonga: Civil Wars & Political Transitions</h1>
            <p>Based on H.J.M. Claessen's Survey (1793-1820)</p>
        </div>

        <div class="controls">
            <button class="btn" onclick="startAnimation()">‚ñ∂Ô∏è Start Timeline</button>
            <button class="btn" onclick="resetAnimation()">üîÑ Reset</button>
            <button class="btn" onclick="showRulers()">üëë Show Rulers</button>
            <button class="btn" onclick="showFamilyTree()">üå≥ Family Tree</button>
        </div>

        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>

        <div class="timeline-container">
            <div class="family-tree" id="familyTree">
                <div class="family-title">üå≥ Royal Family Trees & Political Alliances</div>
                
                <div class="family-grid">
                    <div class="dynasty tui-tonga">
                        <div class="dynasty-header">
                            <span>üëë</span>
                            <span>TUI TONGA DYNASTY (Sacred Kings)</span>
                        </div>
                        
                        <div class="family-section">
                            <div class="person">
                                <div class="person-name">Paulaho</div>
                                <div class="person-title">Tui Tonga</div>
                                <div class="person-dates">Died 1791-1793</div>
                                <div class="person-info">Killed in battle with Chief Vuna. His death triggered the civil wars.</div>
                                <div class="conflict-indicator">MURDERED</div>
                            </div>
                            
                            <div class="connection">
                                <span>married to</span>
                                <div class="connection-line"></div>
                                <span class="married-to">Tubou Moheofo</span>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Maulupekotofa</div>
                                <div class="person-title">Tui Tonga</div>
                                <div class="person-dates">1792-1806</div>
                                <div class="person-info">Brother of Paulaho. Died soon after taking office.</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Fuanunuiava (Fatafehi)</div>
                                <div class="person-title">Tui Tonga</div>
                                <div class="person-dates">1806-1810</div>
                                <div class="person-info">Son of Paulaho. Strongly influenced by Finau II, married one of his daughters.</div>
                                <div class="alliance-indicator">ALLIED</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Laufilitonga</div>
                                <div class="person-title">Tui Tonga</div>
                                <div class="person-dates">1810-1865</div>
                                <div class="person-info">Son of Fuanunuiava, about 12 years old when he took office. Last of the royal family.</div>
                            </div>
                        </div>
                    </div>

                    <div class="dynasty tui-kanokupolu">
                        <div class="dynasty-header">
                            <span>‚öîÔ∏è</span>
                            <span>TUI KANOKUPOLU DYNASTY (Temporal Rulers)</span>
                        </div>
                        
                        <div class="family-section">
                            <div class="person">
                                <div class="person-name">Tukuaho</div>
                                <div class="person-title">Tui Kanokupolu</div>
                                <div class="person-dates">Until 1799</div>
                                <div class="person-info">Strong man in Tubou group. Ousted Paulaho's widow. Murdered by Tubou Niua during religious ceremony.</div>
                                <div class="conflict-indicator">MURDERED</div>
                            </div>
                            
                            <div class="connection">
                                <span>father</span>
                                <div class="connection-line"></div>
                                <span>Mumui</span>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Maafuolimuola</div>
                                <div class="person-title">Tui Kanokupolu</div>
                                <div class="person-dates">Brief period 1800</div>
                                <div class="person-info">Held office for short period after Tukuaho's murder.</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Tubou Malohi</div>
                                <div class="person-title">Tui Kanokupolu</div>
                                <div class="person-dates">1800-1812</div>
                                <div class="person-info">Brother of murdered Tukuaho. Spent some years in Fiji Islands during his reign.</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Tubou Toa</div>
                                <div class="person-title">Tui Kanokupolu</div>
                                <div class="person-dates">1812-1820</div>
                                <div class="person-info">Brother of Tukuaho. Initially joined Finau but later revenged his brother's death.</div>
                            </div>
                        </div>
                    </div>

                    <div class="dynasty tubou-family">
                        <div class="dynasty-header">
                            <span>üèõÔ∏è</span>
                            <span>TUBOU FAMILY (Political Dynasty)</span>
                        </div>
                        
                        <div class="family-section">
                            <div class="person">
                                <div class="person-name">Maeliuaki</div>
                                <div class="person-title">Father of Tubou Moheofo</div>
                                <div class="person-info">Father of Paulaho's widow. Important ancestor of Tubou family claims.</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Tubou Moheofo</div>
                                <div class="person-title">Widow of Paulaho</div>
                                <div class="person-dates">Active 1792</div>
                                <div class="person-info">Attempted to claim Tui Kanokupolu office. Descendant of Tubou family. Exiled to Eua then Vavau.</div>
                            </div>
                            
                            <div class="connection">
                                <span>brother</span>
                                <div class="connection-line"></div>
                                <span>Mulikihaamea (Tui Haa Takalaua)</span>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Mumui</div>
                                <div class="person-title">Tui Kanokupolu (appointed)</div>
                                <div class="person-info">Brother of Maeliuaki. Father of Tukuaho. Appointed by his son after victory.</div>
                            </div>
                        </div>
                    </div>

                    <div class="dynasty finau-family">
                        <div class="dynasty-header">
                            <span>üó°Ô∏è</span>
                            <span>FINAU ULUKALALA FAMILY (Vavau Chiefs)</span>
                        </div>
                        
                        <div class="family-section">
                            <div class="person">
                                <div class="person-name">Tui Tuiohu</div>
                                <div class="person-title">Chief of Vavau</div>
                                <div class="person-info">Appointed by Paulaho as chief of Vavau Islands. Father of Finau I and II.</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Finau Ulukalala I</div>
                                <div class="person-title">Chief of Vavau</div>
                                <div class="person-dates">Died ~1797</div>
                                <div class="person-info">Described by Cook. Possibly brother of Finau II. Witnessed by "Duff" missionaries.</div>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Finau Ulukalala II</div>
                                <div class="person-title">Chief of Vavau & Haapai</div>
                                <div class="person-dates">Until 1810</div>
                                <div class="person-info">Main rebel leader in civil wars. Great rival of Tukuaho. Patron of Mariner.</div>
                                <div class="conflict-indicator">REBEL</div>
                            </div>
                            
                            <div class="connection">
                                <span>ally</span>
                                <div class="connection-line"></div>
                                <span class="married-to">Tubou Niua (assassin)</span>
                            </div>
                            
                            <div class="relationship-line"></div>
                            
                            <div class="person">
                                <div class="person-name">Finau III</div>
                                <div class="person-title">Chief of Vavau</div>
                                <div class="person-dates">1810+</div>
                                <div class="person-info">Peace-loving son of Finau II. End of main civil war stage.</div>
                                <div class="alliance-indicator">PEACEFUL</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dynasty" style="border-left-color: #9b59b6;">
                    <div class="dynasty-header">
                        <span>üîó</span>
                        <span>KEY POLITICAL RELATIONSHIPS & CONFLICTS</span>
                    </div>
                    
                    <div class="family-section">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                            <div class="person">
                                <div class="person-name">Marriage Alliance</div>
                                <div class="person-info">Fuanunuiava (Tui Tonga) married daughter of Finau II, strengthening rebel alliance against government party.</div>
                            </div>
                            
                            <div class="person">
                                <div class="person-name">The Great Betrayal</div>
                                <div class="person-info">Tubou Toa initially joined Finau, then with Finau's knowledge killed Tubou Niua to revenge his brother Tukuaho's murder.</div>
                            </div>
                            
                            <div class="person">
                                <div class="person-name">Vuna's Claim</div>
                                <div class="person-info">Vuna family claimed hereditary rule of Vavau Islands, backed by Tui Kanokupolu against Finau family appointments.</div>
                            </div>
                            
                            <div class="person">
                                <div class="person-name">Sacred vs Temporal</div>
                                <div class="person-info">Both Tui Tonga and Tui Haa Takalaua supported Finau's rebellion, challenging the temporal authority of Tui Kanokupolu.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rulers-grid" id="rulersGrid" style="display: none;">
                <div class="ruler-card">
                    <div class="ruler-title">Tui Tonga (Sacred King)</div>
                    <p><strong>Paulaho</strong> (died 1791-1793)<br>
                    <strong>Maulupekotofa</strong> (1792-1806)<br>
                    <strong>Fuanunuiava</strong> (1806-1810)<br>
                    <strong>Laufilitonga</strong> (1810-1865)</p>
                </div>
                <div class="ruler-card">
                    <div class="ruler-title">Tui Kanokupolu (Temporal Ruler)</div>
                    <p><strong>Tukuaho</strong> (until 1799 - murdered)<br>
                    <strong>Maafuolimuola</strong> (brief period)<br>
                    <strong>Tubou Malohi</strong> (1800-1812)<br>
                    <strong>Tubou Toa</strong> (1812-1820)</p>
                </div>
                <div class="ruler-card">
                    <div class="ruler-title">Tui Haa Takalaua</div>
                    <p><strong>Mulikihaamea</strong> (until civil wars)<br>
                    <em>Position often vacant during conflicts</em></p>
                </div>
                <div class="ruler-card">
                    <div class="ruler-title">Regional Chiefs</div>
                    <p><strong>Finau Ulukalala II</strong> (Vavau Islands)<br>
                    <strong>Vuna</strong> (Vavau challenger)<br>
                    <strong>Tarkai</strong> (Bea district)</p>
                </div>
            </div>

            <div class="island-info">
                <div class="island tongatapu">
                    <h3>üèùÔ∏è Tongatapu</h3>
                    <p>Main island, seat of Tui Kanokupolu</p>
                </div>
                <div class="island vavau">
                    <h3>üèùÔ∏è Vavau Islands</h3>
                    <p>Northern group, ruled by Finau family</p>
                </div>
                <div class="island haapai">
                    <h3>üèùÔ∏è Haapai Islands</h3>
                    <p>Central group, contested territory</p>
                </div>
            </div>

            <div class="timeline" id="timeline">
                <div class="timeline-item left">
                    <div class="content">
                        <span class="year">1793</span>
                        <h2>‚ö∞Ô∏è Death of Paulaho</h2>
                        <p>King Paulaho killed in battle with chief Vuna, who claimed authority over Vavau Islands. Malaspina's expedition witnesses the aftermath of this crucial event that triggers the coming civil wars.</p>
                    </div>
                </div>

                <div class="timeline-item right">
                    <div class="content">
                        <span class="year">1792-1799</span>
                        <h2>üå™Ô∏è Prelude to Civil Wars</h2>
                        <p>Tubou Moheofo (Paulaho's widow) attempts to claim the office of Tui Kanokupolu. Her cousin Tukuaho ousts her and her son to Eua island. Political tensions escalate across the archipelago.</p>
                    </div>
                </div>

                <div class="timeline-item left">
                    <div class="content">
                        <span class="year">1799</span>
                        <h2>‚öîÔ∏è Murder of Tukuaho</h2>
                        <p>During a religious ceremony on Tongatapu, Finau's ally Tubou Niua kills Tukuaho, the Tui Kanokupolu. This assassination triggers full-scale civil war across the Tongan islands.</p>
                    </div>
                </div>

                <div class="timeline-item right">
                    <div class="content">
                        <span class="year">1799-1810</span>
                        <h2>üî• Height of Civil Wars</h2>
                        <p>Finau Ulukalala II leads rebellion from Vavau and Haapai. Both Tui Tonga and Tui Haa Takalaua support him against the government party. Regular raids on Tongatapu. Protestant missionaries forced to evacuate in 1800.</p>
                    </div>
                </div>

                <div class="timeline-item left">
                    <div class="content">
                        <span class="year">1800-1806</span>
                        <h2>üëë Tubou Malohi's Reign</h2>
                        <p>Tubou Malohi, brother of murdered Tukuaho, becomes Tui Kanokupolu. Tarkai emerges as leading figure in Bea district. Finau continues raids using captured European weapons from ship attacks.</p>
                    </div>
                </div>

                <div class="timeline-item right">
                    <div class="content">
                        <span class="year">1806</span>
                        <h2>üë§ Royal Succession</h2>
                        <p>Tui Tonga Maulupekotofa dies on Vavau Islands. Succeeded by Fuanunuiava, who falls under Finau's influence and marries one of his daughters, strengthening the rebel alliance.</p>
                    </div>
                </div>

                <div class="timeline-item left">
                    <div class="content">
                        <span class="year">1810</span>
                        <h2>üïäÔ∏è Death of Finau II</h2>
                        <p>Finau Ulukalala II dies and is succeeded by his peace-loving son Finau III. This marks the end of the main stage of civil wars. Tui Tonga Fuanunuiava also dies, succeeded by young Laufilitonga.</p>
                    </div>
                </div>

                <div class="timeline-item right">
                    <div class="content">
                        <span class="year">1812-1820</span>
                        <h2>üîÑ Final Transitions</h2>
                        <p>Tubou Malohi dies (1812), succeeded by his brother Tubou Toa as Tui Kanokupolu until 1820. Period of relative stability as the major civil conflicts wind down.</p>
                    </div>
                </div>

                <div class="timeline-item left">
                    <div class="content">
                        <span class="year">1820-1827</span>
                        <h2>üèõÔ∏è Interregnum Period</h2>
                        <p>No official head of state for the entire Tonga Archipelago. Finau IV reigns in Vavau, Taufaahu (son of Tubou Toa) rules Haapai. Christianity begins to take hold with missionary efforts.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let animationIndex = 0;
        let animationTimer;

        function startAnimation() {
            resetAnimation();
            const items = document.querySelectorAll('.timeline-item');
            const progressBar = document.getElementById('progressBar');
            
            animationTimer = setInterval(() => {
                if (animationIndex < items.length) {
                    items[animationIndex].classList.add('animate');
                    
                    // Update progress bar
                    const progress = ((animationIndex + 1) / items.length) * 100;
                    progressBar.style.width = progress + '%';
                    
                    animationIndex++;
                } else {
                    clearInterval(animationTimer);
                    setTimeout(animateRulerCards, 500);
                }
            }, 1000);
        }

        function resetAnimation() {
            clearInterval(animationTimer);
            animationIndex = 0;
            const items = document.querySelectorAll('.timeline-item');
            const rulerCards = document.querySelectorAll('.ruler-card');
            const familySections = document.querySelectorAll('.family-section');
            const progressBar = document.getElementById('progressBar');
            
            items.forEach(item => item.classList.remove('animate'));
            rulerCards.forEach(card => card.classList.remove('animate'));
            familySections.forEach(section => section.classList.remove('animate'));
            progressBar.style.width = '0%';
            
            document.getElementById('rulersGrid').style.display = 'none';
            document.getElementById('familyTree').style.display = 'none';
            document.getElementById('timeline').style.display = 'block';
        }

        function showRulers() {
            document.getElementById('timeline').style.display = 'none';
            document.getElementById('familyTree').style.display = 'none';
            document.getElementById('rulersGrid').style.display = 'grid';
            animateRulerCards();
        }

        function showFamilyTree() {
            document.getElementById('timeline').style.display = 'none';
            document.getElementById('rulersGrid').style.display = 'none';
            document.getElementById('familyTree').style.display = 'block';
            animateFamilyTree();
        }

        function animateFamilyTree() {
            const sections = document.querySelectorAll('.family-section');
            sections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('animate');
                }, index * 300);
            });
        }

        function animateRulerCards() {
            const cards = document.querySelectorAll('.ruler-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('animate');
                }, index * 200);
            });
        }

        // Auto-start animation when page loads
        window.addEventListener('load', () => {
            setTimeout(startAnimation, 1000);
        });

        // Add hover effects for islands
        document.querySelectorAll('.island').forEach(island => {
            island.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.1) rotate(1deg)';
            });
            
            island.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1) rotate(0deg)';
            });
        });
    </script>
</body>
</html>